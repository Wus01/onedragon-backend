# Please write the SQL statement here.

# 공고 테이블 - HIRING_BOARD
CREATE TABLE HIRING_BOARD (
    HIRING_NO          SERIAL PRIMARY KEY,                -- 공고번호 (자동 증가 PK)
    STORE_ID           INT NOT NULL,                      -- 지점ID
    USER_ID            VARCHAR(30) NOT NULL,              -- 회원ID
    HIRING_CNT         INT DEFAULT 0,                     -- 조회수
    HIRING_LIKE_CNT    INT DEFAULT 0,                     -- 찜수
    DEL_YN             VARCHAR(1) NOT NULL DEFAULT 'N',   -- 삭제여부 (Y/N)
    HIRING_STS         VARCHAR(3) NOT NULL,               -- 공고상태 (예: ACT, EXP 등)
    HIRING_DATE        DATE NOT NULL,                     -- 공고작성일자
    HIRING_UPDT_DATE   DATE,                              -- 공고수정일자
    SERVICE_TYPE       VARCHAR(10),                       -- 업종
    WORK_START_DATE    TIMESTAMP,                         -- 근무시작일자
    WORK_END_DATE      TIMESTAMP,                         -- 근무종료일자
    NEGOTIABLE_YN      VARCHAR(1),                        -- 협의여부 (Y/N)
    URGENCY_YN         VARCHAR(10),                       -- 긴급여부 (Y/N)
    HIRING_TITLE       TEXT,                              -- 공고 제목
    HIRING_TEXT        TEXT,                              -- 공고 내용
    PAY_PER_HOUR       VARCHAR(10) NOT NULL DEFAULT '0',  -- 급여
    RGST_DATE          TIMESTAMP NOT NULL,                -- 등록일시
    UPDT_DATE          TIMESTAMP,                     	  -- 수정일시
    RGST_ID            VARCHAR(30) NOT NULL,              -- 등록 아이디
    UPDT_ID            VARCHAR(30)                        -- 수정 아이디
);

    // db 삭제 안 하실 분들은 이거 사용하세용
    ALTER TABLE hiring_board ADD COLUMN PAY_PER_HOUR VARCHAR(10) DEFAULT '0';

    COMMENT ON TABLE HIRING_BOARD IS '공고 테이블';

    COMMENT ON COLUMN HIRING_BOARD.HIRING_NO IS '공고번호(seq)';
    COMMENT ON COLUMN HIRING_BOARD.STORE_ID IS '지점ID';
    COMMENT ON COLUMN HIRING_BOARD.USER_ID IS '회원ID';
    COMMENT ON COLUMN HIRING_BOARD.HIRING_CNT IS '조회수';
    COMMENT ON COLUMN HIRING_BOARD.HIRING_LIKE_CNT IS '찜수';
    COMMENT ON COLUMN HIRING_BOARD.DEL_YN IS '삭제여부 (Y/N)';
    COMMENT ON COLUMN HIRING_BOARD.HIRING_STS IS '공고상태 (예: ACT, EXP 등)';
    COMMENT ON COLUMN HIRING_BOARD.HIRING_DATE IS '공고작성일자';
    COMMENT ON COLUMN HIRING_BOARD.HIRING_UPDT_DATE IS '공고수정일자';
    COMMENT ON COLUMN HIRING_BOARD.SERVICE_TYPE IS '업종';
    COMMENT ON COLUMN HIRING_BOARD.WORK_START_DATE IS '근무시작일자';
    COMMENT ON COLUMN HIRING_BOARD.WORK_END_DATE IS '근무종료일자';
    COMMENT ON COLUMN HIRING_BOARD.NEGOTIABLE_YN IS '협의여부 (Y/N)';
    COMMENT ON COLUMN HIRING_BOARD.URGENCY_YN IS '긴급여부 (Y/N)';
    COMMENT ON COLUMN HIRING_BOARD.HIRING_TITLE IS '공고 제목';
    COMMENT ON COLUMN HIRING_BOARD.HIRING_TEXT IS '공고 내용';
    COMMENT ON COLUMN HIRING_BOARD.RGST_DATE IS '등록일시';
    COMMENT ON COLUMN HIRING_BOARD.UPDT_DATE IS '수정일시';
    COMMENT ON COLUMN HIRING_BOARD.RGST_ID IS '등록 아이디';
    COMMENT ON COLUMN HIRING_BOARD.UPDT_ID IS '수정 아이디';


# 공고 찜 테이블
CREATE TABLE hiring_like (
    no SERIAL   PRIMARY KEY,                        -- 번호(seq)
    hiring_no   INT NOT NULL,                       -- 공고번호
    store_id    INT NOT NULL,                       -- 지점ID
    user_id     VARCHAR(30) NOT NULL,               -- 회원 ID
    like_yn     VARCHAR(1) NOT NULL DEFAULT 'N',    -- 'Y/N' 찜 여부
    rgst_date   TIMESTAMP NOT NULL,                 -- 등록일시
    rgst_id     VARCHAR(30) NOT NULL                -- 등록 아이디
);

    COMMENT ON TABLE hiring_like IS '공고 찜 테이블';

    COMMENT ON COLUMN hiring_like.no IS '번호(seq)';
    COMMENT ON COLUMN hiring_like.hiring_no IS '공고번호';
    COMMENT ON COLUMN hiring_like.store_id IS '지점ID';
    COMMENT ON COLUMN hiring_like.user_id IS '찜한 회원 ID';
    COMMENT ON COLUMN hiring_like.like_yn IS '찜 여부 (Y/N)';
    COMMENT ON COLUMN hiring_like.rgst_date IS '등록 일시';
    COMMENT ON COLUMN hiring_like.rgst_id IS '등록 아이디';


# 지원정보 테이블
CREATE table APPLY_INFO (
    APPLY_NO SERIAL PRIMARY KEY,
    HIRING_NO INTEGER NOT NULL,
    USER_ID VARCHAR(255) NOT NULL,
    APPLY_DATE TIMESTAMP WITHOUT TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    APPLY_SUC_YN VARCHAR(1) DEFAULT 'N',
    RGST_DATE TIMESTAMP WITHOUT TIME ZONE DEFAULT CURRENT_TIMESTAMP NOT NULL,
    RGST_ID VARCHAR(100) NOT NULL,
    UPDT_DATE TIMESTAMP WITHOUT TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    UPDT_ID VARCHAR(100)
);

	COMMENT ON TABLE APPLY_INFO IS '지원정보 테이블';

    COMMENT ON COLUMN APPLY_INFO.APPLY_NO IS '지원번호';
	COMMENT ON COLUMN APPLY_INFO.HIRING_NO IS '공고번호';
	COMMENT ON COLUMN APPLY_INFO.USER_ID IS '회원아이디';
	COMMENT ON COLUMN APPLY_INFO.APPLY_DATE IS '지원일시';
	COMMENT ON COLUMN APPLY_INFO.APPLY_SUC_YN IS '지원성공여부';
	COMMENT ON COLUMN APPLY_INFO.RGST_DATE IS '등록일시';
	COMMENT ON COLUMN APPLY_INFO.RGST_ID IS '등록아이디';
	COMMENT ON COLUMN APPLY_INFO.UPDT_DATE IS '수정일시';
	COMMENT ON COLUMN APPLY_INFO.UPDT_ID IS '수정아이디';


# 지점 테이블
  ㄴ 업종(STORE_CTGRY) 컬럼은 아직 공통 코드 구현이 안 돼서 NOT NULL 속성 제거하고 사용하십쇼!!
CREATE TABLE store_info (
    STORE_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,              -- 지점ID
    STORE_NM VARCHAR(500) NOT NULL,                                             -- 지점명
    STORE_ADDR VARCHAR(1000) NOT NULL,                                          -- 주소
    STORE_CTGRY VARCHAR(10) NOT NULL,                                           -- 업종
    RGST_ID varchar(30) NOT NULL,                                               -- 등록 아이디
    RGST_DATE TIMESTAMP NOT NULL, 	 	                                        -- 등록일시
    UPDT_ID varchar(30),                                                        -- 수정 아이디
    UPDT_DATE TIMESTAMP      				                                    -- 수정일시
);

    COMMENT ON TABLE STORE_INFO IS '지점 테이블';

    COMMENT ON COLUMN STORE_INFO.STORE_ID IS '지점ID';
    COMMENT ON COLUMN STORE_INFO.STORE_NM IS '지점명';
    COMMENT ON COLUMN STORE_INFO.STORE_ADDR IS '주소';
    COMMENT ON COLUMN STORE_INFO.STORE_CTGRY IS '업종';
    COMMENT ON COLUMN STORE_INFO.RGST_ID IS '등록 아이디';
    COMMENT ON COLUMN STORE_INFO.RGST_DATE IS '등록일시';
    COMMENT ON COLUMN STORE_INFO.UPDT_ID IS '수정 아이디';
    COMMENT ON COLUMN STORE_INFO.UPDT_DATE IS '수정일시';


# 회원 테이블
CREATE TABLE USER_INFO (
    USER_ID				VARCHAR(30) PRIMARY KEY,			-- 회원ID
    USER_NM				VARCHAR(10) NOT NULL,				-- 회원명
    USER_PWD			VARCHAR(50) NOT NULL,				-- 회원비밀번호
    USER_EMAIL			VARCHAR(50) UNIQUE,					-- 회원이메일
    USER_DEL_YN			VARCHAR(1) NOT NULL DEFAULT 'N',	-- 회원탈퇴여부
    USER_TYPE           VARCHAR(1) NOT NULL DEFAULT 'E',	-- 점주알바생구분 (R/E)
    EMPLOYER_AUTH_YN	VARCHAR(1) NOT NULL DEFAULT 'N',	-- 점주인증구분 (Y/N)
    AGREEMENT_TERMS     BOOLEAN NOT NULL,					-- 개인정보동의여부
    DEL_DATE			DATE,       						-- 탈퇴일시
    RGST_DATE			DATE NOT NULL,						-- 등록일시
    UPDT_DATE			DATE,       						-- 수정일시
    RGST_ID				VARCHAR(30) NOT NULL,				-- 등록 아이디
    UPDT_ID				VARCHAR(30)							-- 수정 아이디
);

    COMMENT ON TABLE USER_INFO IS '회원 테이블';

    COMMENT ON COLUMN USER_INFO.USER_ID IS '회원ID';
    COMMENT ON COLUMN USER_INFO.USER_NM IS '회원명';
    COMMENT ON COLUMN USER_INFO.USER_PWD IS '회원비밀번호';
    COMMENT ON COLUMN USER_INFO.USER_EMAIL IS '회원이메일';
    COMMENT ON COLUMN USER_INFO.USER_DEL_YN IS '회원탈퇴여부';
    COMMENT ON COLUMN USER_INFO.USER_TYPE IS '점주알바생구분 (R/E)';
    COMMENT ON COLUMN USER_INFO.EMPLOYER_AUTH_YN IS '점주인증구분 (Y/N)';
    COMMENT ON COLUMN USER_INFO.AGREEMENT_TERMS IS '개인정보동의여부';
    COMMENT ON COLUMN USER_INFO.DEL_DATE IS '탈퇴일시';
    COMMENT ON COLUMN USER_INFO.RGST_DATE IS '등록일시';
    COMMENT ON COLUMN USER_INFO.UPDT_DATE IS '수정일시';
    COMMENT ON COLUMN USER_INFO.RGST_ID IS '등록 아이디';
    COMMENT ON COLUMN USER_INFO.UPDT_ID IS '수정 아이디';

# 경력 테이블
    CREATE TABLE CRR_HSTR (
        USER_ID INT NOT NULL,
        STORE_ID INT NOT NULL,
        CRR_STRT_DATE VARCHAR(8) NOT NULL ,
        CRR_END_DATE VARCHAR(8),
        AUTH_YN BOOLEAN NOT NULL DEFAULT FALSE,
        RGST_ID VARCHAR(30),
        RGST_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
        UPDT_ID VARCHAR(30),
        UPDT_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
        DEL_YN BOOLEAN NOT NULL DEFAULT 'N'
    );


    COMMENT ON TABLE CRR_HSTR IS '경력 테이블';
    COMMENT ON COLUMN CRR_HSTR.USER_ID       IS '회원 아이디';
    COMMENT ON COLUMN CRR_HSTR.STORE_ID      IS '지점 아이디';
    COMMENT ON COLUMN CRR_HSTR.CRR_STRT_DATE IS '경력시작일';
    COMMENT ON COLUMN CRR_HSTR.CRR_END_DATE  IS '경력종료일';
    COMMENT ON COLUMN CRR_HSTR.AUTH_YN       IS '인증여부';
    COMMENT ON COLUMN CRR_HSTR.RGST_ID       IS '등록 아이디';
    COMMENT ON COLUMN CRR_HSTR.RGST_DATE     IS '등록 날짜';
    COMMENT ON COLUMN CRR_HSTR.UPDT_ID       IS '수정 아이디';
    COMMENT ON COLUMN CRR_HSTR.UPDT_DATE     IS '수정 날짜';
    COMMENT ON COLUMN CRR_HSTR.DEL_YN        IS '삭제 여부';

#회원 정보 insert문

INSERT INTO public.user_info
(
	user_id,user_nm,user_pwd,user_email,user_del_yn,user_type,employer_auth_yn,agreement_terms,del_date,rgst_date,updt_date,rgst_id,updt_id
)
VALUES
(
	'test1','김한희','test1','test1@gmail.com','N','E','N',false,NULL,'2025-11-09 15:30:41.83',NULL,'test1',NULL
),
(
	'test2','황원정','test2','test2@gmail.com','N','E','N',false,NULL,'2025-11-09 15:59:33.975',NULL,'test2',NULL
),
(
	'test3','곽혜진','test3','test3@gmail.com','N','E','N',false,NULL,'2025-11-09 16:20:04.453',NULL,'test3',NUL
),
(
	'test4','황지현','test4','test4@gmail.com','N','E','N',true,NULL,'2025-11-09 16:35:32.509',NULL,'test4',NULL
);
